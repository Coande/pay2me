(function(t){function e(e){for(var n,c,s=e[0],o=e[1],u=e[2],p=0,d=[];p<s.length;p++)c=s[p],r[c]&&d.push(r[c][0]),r[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var o=a[s];0!==r[o]&&(n=!1)}n&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},i=[];function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"07bb":function(t,e,a){},"1dc7":function(t,e,a){},3519:function(t,e,a){"use strict";var n=a("c08c"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=(a("28a5"),a("386d"),{getQueryVariable:function(t){for(var e=window.location.search.substring(1),a=e.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(r[0]==t)return r[1]}return""}}),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.showMake?a("make-page"):t._e(),t.showMake?t._e():a("result-page")],1)},c=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},[t._v("制作多合一收款码")]),a("div",{staticClass:"page-content"},[t._l(t.dataMap,function(e,n){return a("div",{key:n},[a("label",{staticClass:"picker-button",class:[e.result?"is-active":""],attrs:{for:n+"File"}},[t._v("选择"+t._s(e.name)+"收款码")]),a("input",{ref:n,refInFor:!0,staticClass:"hidden-input",attrs:{id:n+"File",type:"file",accept:"image/*"},on:{change:function(e){return t.handleChange(arguments[0],n)}}})])}),a("div",[a("button",{staticClass:"submit-button",on:{click:t.handleSubmit}},[t._v("合成")])])],2),a("div",{staticClass:"copyright"},[t._v("© 2019 Coande")])])},o=[],u=(a("7f7f"),a("f559"),a("ecec")),l=a.n(u),p={name:"app",components:{},data:function(){return{CANVASMAXWIDTH:400,CANVASMAXHEIGHT:600,dataMap:{alipay:{name:"支付宝",result:"",startsWith:"https://qr.alipay.com/"},wechat:{name:"微信",result:"",startsWith:"wxp://"},qq:{name:"QQ",result:"",startsWith:"https://i.qianbao.qq.com/wallet/sqrcode.htm?m=tenpay&f=wallet&u="}}}},methods:{handleChange:function(t,e){var a=this,n=t.target.files[0];if(n){var r,i,c,s,o=new Image;o.src=URL.createObjectURL(n),o.onload=function(){r=o.width,i=o.height,(r>a.CANVASMAXWIDTH||i>a.CANVASMAXHEIGHT)&&(r/i>a.CANVASMAXWIDTH/a.CANVASMAXHEIGHT?(c=a.CANVASMAXWIDTH,s=c/r*i):(s=a.CANVASMAXHEIGHT,c=s/i*r));var t=document.createElement("canvas");t.width=c,t.height=s;var n=t.getContext("2d");n.drawImage(o,0,0,c,s);var u=n.getImageData(0,0,c,s),p={};try{p=l()(u.data,Math.floor(c),Math.floor(s))}catch(d){return void alert("无法识别二维码")}p&&p.data?p.data.startsWith(a.dataMap[e].startsWith)?a.dataMap[e].result=p.data:alert("不是".concat(a.dataMap[e].name,"收款码")):alert("找不到二维码")}}},handleSubmit:function(){var t=this.dataMap.alipay.result,e=this.dataMap.wechat.result,a=this.dataMap.qq.result,n=[];if(t&&n.push("alipay=".concat(encodeURIComponent(t))),e&&n.push("wechat=".concat(encodeURIComponent(e))),a&&n.push("qq=".concat(encodeURIComponent(a))),n.length){var r=-1===window.location.href.indexOf("?")?"?":"&";window.location.href="".concat(window.location.href).concat(r).concat(n.join("&"))}else alert("请先选择二维码")}}},d=p,h=(a("3519"),a("2877")),f=Object(h["a"])(d,s,o,!1,null,"f86b8394",null),m=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},t._l(t.showdataMap,function(t,e){return a("i",{key:e,class:["iconfont","icon-"+e]})}),0),a("div",{staticClass:"page-content"},[a("img",{attrs:{src:t.imgSrc}})]),a("div",{staticClass:"page-footer"},[t._v(t._s(t.tips))]),t.coverImgSrc?a("img",{staticClass:"cover-image",attrs:{src:t.coverImgSrc}}):t._e()])},b=[],v=(a("4917"),a("96cf"),a("3b8d")),w=(a("ac6a"),a("a4bb")),M=a.n(w),y=a("d055"),x=a.n(y),C=a("951f"),k=a.n(C),A={data:function(){return{imgSrc:"",coverImgSrc:"",tips:"扫一扫向我付款",dataMap:{alipay:{name:"支付宝",result:""},wechat:{name:"微信",result:""},qq:{name:"QQ",result:""}},current:""}},computed:{showdataMap:function(){var t=this,e=M()(this.dataMap).filter(function(e){return t.dataMap[e].result&&!t.current||t.current===e}),a={};return M()(this.dataMap).forEach(function(n){-1!==e.indexOf(n)&&(a[n]=t.dataMap[n])}),a}},mounted:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(M()(this.dataMap).forEach(function(t){a.dataMap[t].result=decodeURIComponent(a.$utils.getQueryVariable(t))}),this.$utils.getQueryVariable("production")){t.next=8;break}return this.current="",t.next=5,x.a.toDataURL("".concat(window.location.href,"&production=1"));case 5:return this.imgSrc=t.sent,k()(document.body).then(function(t){a.coverImgSrc=t.toDataURL(),alert("你可以通过长按来保存当前图片")}),t.abrupt("return");case 8:if(!navigator.userAgent.match(/Alipay/i)){t.next=20;break}if(!this.dataMap.alipay.result){t.next=17;break}return t.next=12,x.a.toDataURL(this.dataMap.alipay.result);case 12:this.imgSrc=t.sent,window.location.href=this.dataMap.alipay.result,this.current="alipay",t.next=18;break;case 17:alert("不支持支付宝付款");case 18:t.next=52;break;case 20:if(!navigator.userAgent.match(/MicroMessenger\//i)){t.next=32;break}if(!this.dataMap.wechat.result){t.next=29;break}return t.next=24,x.a.toDataURL(this.dataMap.wechat.result);case 24:this.imgSrc=t.sent,this.tips="长按识别二维码",this.current="wechat",t.next=30;break;case 29:alert("不支持微信付款");case 30:t.next=52;break;case 32:if(!navigator.userAgent.match(/QQ\//i)){t.next=44;break}if(!this.dataMap.qq.result){t.next=41;break}return t.next=36,x.a.toDataURL(this.dataMap.qq.result);case 36:this.imgSrc=t.sent,this.tips="长按识别二维码",this.current="qq",t.next=42;break;case 41:alert("不支持QQ付款");case 42:t.next=52;break;case 44:return t.next=46,x.a.toDataURL(window.location.href);case 46:this.imgSrc=t.sent,this.tips="扫一扫向我付款",this.current="",e=document.createElement("a"),e.href="alipays://platformapi/startapp?saId=10000007&qrcode=".concat(encodeURIComponent(this.dataMap.alipay.result)),e.click();case 52:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},S=A,I=(a("a629"),Object(h["a"])(S,g,b,!1,null,"4c58233a",null)),_=I.exports,q={components:{MakePage:m,ResultPage:_},data:function(){return{showMake:!0}},methods:{},mounted:function(){var t=decodeURIComponent(this.$utils.getQueryVariable("alipay")),e=decodeURIComponent(this.$utils.getQueryVariable("wechat")),a=decodeURIComponent(this.$utils.getQueryVariable("qq"));this.showMake=!(t||e||a)}},R=q,O=(a("c3b4"),a("b0a0"),Object(h["a"])(R,i,c,!1,null,"af1ef1ce",null)),U=O.exports;n["a"].config.productionTip=!1,n["a"].prototype.$utils=r,new n["a"]({render:function(t){return t(U)}}).$mount("#app")},7676:function(t,e,a){},a629:function(t,e,a){"use strict";var n=a("7676"),r=a.n(n);r.a},b0a0:function(t,e,a){"use strict";var n=a("07bb"),r=a.n(n);r.a},c08c:function(t,e,a){},c3b4:function(t,e,a){"use strict";var n=a("1dc7"),r=a.n(n);r.a}});
//# sourceMappingURL=app.b9c1a581.js.map