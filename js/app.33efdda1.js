(function(t){function e(e){for(var r,s,c=e[0],o=e[1],u=e[2],p=0,d=[];p<c.length;p++)s=c[p],n[s]&&d.push(n[s][0]),n[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,c=1;c<a.length;c++){var o=a[c];0!==n[o]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},n={app:0},i=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"07bb":function(t,e,a){},"1db1":function(t,e,a){},"2fbd":function(t,e,a){"use strict";var r=a("30c0"),n=a.n(r);n.a},"30c0":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=(a("28a5"),a("386d"),{getQueryVariable:function(t){for(var e=window.location.search.substring(1),a=e.split("&"),r=0;r<a.length;r++){var n=a[r].split("=");if(n[0]==t)return n[1]}return""}}),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[""===t.resultType?a("make-page"):t._e(),"resultNormal"===t.resultType?a("result-page"):t._e(),"resultFun"===t.resultType?a("result-page-fun"):t._e()],1)},s=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},[t._v("制作多合一收款码")]),a("div",{staticClass:"page-content"},[t._l(t.dataMap,function(e,r){return a("div",{key:r},[a("label",{staticClass:"picker-button",class:[e.result?"is-active":""],attrs:{for:r+"File"}},[t._v("选择"+t._s(e.name)+"收款码")]),a("input",{ref:r,refInFor:!0,staticClass:"hidden-input",attrs:{id:r+"File",type:"file",accept:"image/*"},on:{change:function(e){return t.handleChange(arguments[0],r)}}})])}),a("div",{staticClass:"result-type"},[a("span",{staticClass:"result-type__item result-type__normal",class:["resultNormal"===t.resultType?"active":""],on:{click:function(e){t.resultType="resultNormal"}}},[t._v("正常")]),a("span",{staticClass:"result-type__item result-type__fun",class:["resultFun"===t.resultType?"active":""],on:{click:function(e){t.resultType="resultFun"}}},[t._v("表情")])]),a("div",[a("button",{staticClass:"submit-button",on:{click:t.handleSubmit}},[t._v("合成")])])],2),a("div",{staticClass:"copyright"},[t._v("© 2019 Coande")])])},o=[],u=(a("7f7f"),a("f559"),a("ecec")),l=a.n(u),p={name:"app",components:{},data:function(){return{CANVASMAXWIDTH:400,CANVASMAXHEIGHT:600,dataMap:{alipay:{name:"支付宝",result:"",startsWith:"https://qr.alipay.com/"},wechat:{name:"微信",result:"",startsWith:"wxp://"},qq:{name:"QQ",result:"",startsWith:"https://i.qianbao.qq.com/wallet/sqrcode.htm?m=tenpay&f=wallet&u="}},resultType:"resultNormal"}},methods:{handleChange:function(t,e){var a=this,r=t.target.files[0];if(r){var n,i,s,c,o=new Image;o.src=URL.createObjectURL(r),o.onload=function(){n=o.width,i=o.height,(n>a.CANVASMAXWIDTH||i>a.CANVASMAXHEIGHT)&&(n/i>a.CANVASMAXWIDTH/a.CANVASMAXHEIGHT?(s=a.CANVASMAXWIDTH,c=s/n*i):(c=a.CANVASMAXHEIGHT,s=c/i*n));var t=document.createElement("canvas");t.width=s,t.height=c;var r=t.getContext("2d");r.drawImage(o,0,0,s,c);var u=r.getImageData(0,0,s,c),p={};try{p=l()(u.data,Math.floor(s),Math.floor(c))}catch(d){return void alert("无法识别二维码")}p&&p.data?p.data.startsWith(a.dataMap[e].startsWith)?a.dataMap[e].result=p.data:alert("不是".concat(a.dataMap[e].name,"收款码")):alert("找不到二维码")}}},handleSubmit:function(){var t=this.dataMap.alipay.result,e=this.dataMap.wechat.result,a=this.dataMap.qq.result,r=[];if(t&&r.push("alipay=".concat(encodeURIComponent(t))),e&&r.push("wechat=".concat(encodeURIComponent(e))),a&&r.push("qq=".concat(encodeURIComponent(a))),r.push("resultType=".concat(this.resultType)),r.length){var n=-1===window.location.href.indexOf("?")?"?":"&";window.location.href="".concat(window.location.href).concat(n).concat(r.join("&"))}else alert("请先选择二维码")}}},d=p,h=(a("f70f"),a("2877")),f=Object(h["a"])(d,c,o,!1,null,"7b10bb4e",null),m=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"page",staticClass:"page"},[a("div",{staticClass:"page-header"},t._l(t.showdataMap,function(t,e){return a("i",{key:e,class:["iconfont","icon-"+e]})}),0),a("div",{staticClass:"page-content"},[a("img",{attrs:{src:t.imgSrc}})]),a("div",{staticClass:"page-footer"},[t._v(t._s(t.tips))]),t.coverImgSrc?a("img",{staticClass:"cover-image",attrs:{src:t.coverImgSrc}}):t._e()])},v=[],b=(a("4917"),a("96cf"),a("3b8d")),w=(a("ac6a"),a("a4bb")),y=a.n(w),M=a("d055"),x=a.n(M),C=a("c0e9"),_=a.n(C),I={data:function(){return{imgSrc:"",coverImgSrc:"",tips:"扫一扫向我付款",dataMap:{alipay:{name:"支付宝",result:""},wechat:{name:"微信",result:""},qq:{name:"QQ",result:""}},current:""}},computed:{showdataMap:function(){var t=this,e=y()(this.dataMap).filter(function(e){return t.dataMap[e].result&&!t.current||t.current===e}),a={};return y()(this.dataMap).forEach(function(r){-1!==e.indexOf(r)&&(a[r]=t.dataMap[r])}),a}},mounted:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(y()(this.dataMap).forEach(function(t){a.dataMap[t].result=decodeURIComponent(a.$utils.getQueryVariable(t))}),this.$utils.getQueryVariable("production")){t.next=8;break}return this.current="",t.next=5,x.a.toDataURL("".concat(window.location.href,"&production=1"));case 5:return this.imgSrc=t.sent,_()(this.$refs.page).then(function(t){a.coverImgSrc=t.toDataURL(),a.getIsMobile()?alert("你可以通过长按来保存当前图片"):alert("你可以右键另存当前图片")}),t.abrupt("return");case 8:if(!navigator.userAgent.match(/Alipay/i)){t.next=20;break}if(!this.dataMap.alipay.result){t.next=17;break}return t.next=12,x.a.toDataURL(this.dataMap.alipay.result);case 12:this.imgSrc=t.sent,window.location.href=this.dataMap.alipay.result,this.current="alipay",t.next=18;break;case 17:alert("不支持支付宝付款");case 18:t.next=52;break;case 20:if(!navigator.userAgent.match(/MicroMessenger\//i)){t.next=32;break}if(!this.dataMap.wechat.result){t.next=29;break}return t.next=24,x.a.toDataURL(this.dataMap.wechat.result);case 24:this.imgSrc=t.sent,this.tips="长按识别二维码",this.current="wechat",t.next=30;break;case 29:alert("不支持微信付款");case 30:t.next=52;break;case 32:if(!navigator.userAgent.match(/QQ\//i)){t.next=44;break}if(!this.dataMap.qq.result){t.next=41;break}return t.next=36,x.a.toDataURL(this.dataMap.qq.result);case 36:this.imgSrc=t.sent,this.tips="长按识别二维码",this.current="qq",t.next=42;break;case 41:alert("不支持QQ付款");case 42:t.next=52;break;case 44:return t.next=46,x.a.toDataURL(window.location.href);case 46:this.imgSrc=t.sent,this.tips="扫一扫向我付款",this.current="",e=document.createElement("a"),e.href="alipays://platformapi/startapp?saId=10000007&qrcode=".concat(encodeURIComponent(this.dataMap.alipay.result)),e.click();case 52:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{getIsMobile:function(){var t=navigator.userAgent.toLowerCase(),e="ipad"==t.match(/ipad/i),a="iphone os"==t.match(/iphone os/i),r="midp"==t.match(/midp/i),n="rv:1.2.3.4"==t.match(/rv:1.2.3.4/i),i="ucweb"==t.match(/ucweb/i),s="android"==t.match(/android/i),c="windows ce"==t.match(/windows ce/i),o="windows mobile"==t.match(/windows mobile/i);return!!(e||a||r||n||i||s||c||o)}}},A=I,S=(a("da68"),Object(h["a"])(A,g,v,!1,null,"10914600",null)),k=S.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("img",{staticClass:"result-image",attrs:{src:t.resultImageSrc}})])},q=[],R=a("f2ae"),O=a.n(R),j={data:function(){return{qrcodePosition:{left:240,top:460,width:200,height:200},resultImageSrc:""}},computed:{},mounted:function(){var t=this,e=document.createElement("canvas"),a=new Image;a.src=O.a,a.onload=Object(b["a"])(regeneratorRuntime.mark(function r(){var n,i,s,c;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return e.width=a.width,e.height=a.height,r.next=4,t.$nextTick();case 4:return n=e.getContext("2d"),n.drawImage(a,0,0),i=new URL(location.href),i.searchParams.set("resultType","resultNormal"),i.searchParams.set("production","1"),r.next=11,x.a.toDataURL(i.href);case 11:s=r.sent,c=new Image,c.src=s,c.onload=function(){n.drawImage(c,t.qrcodePosition.left,t.qrcodePosition.top,t.qrcodePosition.width,t.qrcodePosition.height),t.resultImageSrc=e.toDataURL(),t.getIsMobile()?alert("你可以通过长按来保存当前图片"):alert("你可以右键另存当前图片")};case 15:case"end":return r.stop()}},r,this)}))},methods:{getIsMobile:function(){var t=navigator.userAgent.toLowerCase(),e="ipad"==t.match(/ipad/i),a="iphone os"==t.match(/iphone os/i),r="midp"==t.match(/midp/i),n="rv:1.2.3.4"==t.match(/rv:1.2.3.4/i),i="ucweb"==t.match(/ucweb/i),s="android"==t.match(/android/i),c="windows ce"==t.match(/windows ce/i),o="windows mobile"==t.match(/windows mobile/i);return!!(e||a||r||n||i||s||c||o)}}},U=j,P=(a("d31c"),Object(h["a"])(U,T,q,!1,null,"5afa7d77",null)),D=P.exports,E={components:{MakePage:m,ResultPage:k,ResultPageFun:D},data:function(){return{resultType:""}},methods:{},mounted:function(){var t=decodeURIComponent(this.$utils.getQueryVariable("resultType"));this.resultType=t||""}},L=E,N=(a("2fbd"),a("b0a0"),Object(h["a"])(L,i,s,!1,null,"3f4d5478",null)),H=N.exports;r["a"].config.productionTip=!1,r["a"].prototype.$utils=n,new r["a"]({render:function(t){return t(H)}}).$mount("#app")},7311:function(t,e,a){},b0a0:function(t,e,a){"use strict";var r=a("07bb"),n=a.n(r);n.a},d31c:function(t,e,a){"use strict";var r=a("7311"),n=a.n(r);n.a},d434:function(t,e,a){},da68:function(t,e,a){"use strict";var r=a("d434"),n=a.n(r);n.a},f2ae:function(t,e,a){t.exports=a.p+"img/fun.b813c3fa.jpg"},f70f:function(t,e,a){"use strict";var r=a("1db1"),n=a.n(r);n.a}});
//# sourceMappingURL=app.33efdda1.js.map